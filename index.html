<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shawn's Website Library</title>
  <style>
    html { font-size: clamp(14px, 1.35vw + 0.5px, 18px); box-sizing: border-box; }
    *, *::before, *::after { box-sizing: inherit; }
    :root{
      --bg:#0f1115; --panel:#141619; --muted:#9aa0a6; --accent:#4da3ff; --card:#181a1d;
      --radius: 0.75rem;
    }
    html,body{height:100%;margin:0;font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#e8eef6;background:var(--bg);-webkit-font-smoothing:antialiased;}
    header{display:flex;align-items:center;gap:0.75rem;padding:0.9rem 1rem;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-bottom:1px solid rgba(255,255,255,0.03)}
    header h1{font-size:1.05rem;margin:0}
    header .controls{margin-left:auto;display:flex;gap:0.5rem;align-items:center}

    button.btn{background:var(--card);border:1px solid rgba(255,255,255,0.03);padding:0.45rem 0.6rem;border-radius:0.5rem;color:inherit;cursor:pointer;font-size:1rem}
    button.btn:hover{box-shadow:0 0.25rem 1.125rem rgba(0,0,0,0.4)}

    .lang-switch { display:flex; gap:0.5rem; }
    .lang-btn {
      border: 1px solid #555;
      border-radius: 8px;
      padding: 0.3rem 0.8rem;
      cursor: pointer;
      font-size: 0.95rem;
      background: #0f1115;
      color: #fff;
    }
    .lang-btn.active {
      background: #fff;
      color: #000;
    }

    #container{display:flex;height:calc(100vh - 3.5rem);overflow:hidden}
    #sidebar{width:16.25rem;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);padding:1rem;box-sizing:border-box;border-right:1px solid rgba(255,255,255,0.02);overflow:auto;transition:transform .28s ease}
    #nav h2{margin:0;padding:0.5rem 0;cursor:pointer;display:flex;align-items:center;gap:0.5rem;font-size:1rem}
    #nav ul{list-style:none;padding-left:1rem;margin:0 0 1rem 0;display:none}
    #nav li{margin:0.35rem 0}
    #nav a{color:var(--accent);text-decoration:none;font-size:0.95rem}
    #main{flex:1;overflow:auto;padding:1rem;box-sizing:border-box}
    section.card{background:var(--panel);padding:1rem;border-radius:0.75rem;margin-bottom:1rem;border:1px solid rgba(255,255,255,0.03)}
    .site-item{padding:0.6rem 0;border-bottom:1px dashed rgba(255,255,255,0.03)}
    .site-item:last-child{border-bottom:none}
    .site-item a{font-weight:600;color:var(--accent);text-decoration:none;font-size:1rem}
    .site-desc{color:var(--muted);margin:0.3rem 0;font-size:0.95rem}

    /* æ‰‹æœº & å¹³æ¿é€‚é… */
    @media (max-width: 1024px) {
      #sidebar {
        position: fixed;
        top: 3.5rem;
        left: 0;
        width: 70%;
        max-width: 280px;
        height: calc(100vh - 3.5rem);
        background: var(--panel);
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 100;
        border-right: 1px solid rgba(255,255,255,0.1);
      }
      #sidebar.show { transform: translateX(0); }
      #main { flex: 1; padding: 0.8rem; }
    }

    a { word-break: break-word; }
  </style>
</head>
<body>
  <header>
    <button id="toggleBtn" class="btn" aria-label="Toggle sidebar">â˜°</button>
    <h1 id="pageTitle">Shawn's Website Library</h1>
    <div class="controls">
      <div class="lang-switch">
        <button id="btnZh" class="lang-btn">ä¸­æ–‡</button>
        <button id="btnEn" class="lang-btn">English</button>
      </div>
      <button id="lockBtn" class="btn" title="Lock site">ğŸ”“ Unlock</button>
    </div>
  </header>

  <div id="container">
    <aside id="sidebar"><nav id="nav"></nav></aside>
    <main id="main"><div id="content"></div></main>
  </div>

  <div id="passwordOverlay" class="overlay" style="display:none" aria-hidden="false">
    <div class="modal">
      <h2 id="pwdTitle">è¯·è¾“å…¥è®¿é—®å¯†ç </h2>
      <p id="pwdDesc">ä¸ºä¿æŠ¤æ­¤ç«™å†…å®¹ï¼Œè¯·è¾“å…¥å¯†ç ä»¥ç»§ç»­è®¿é—®ã€‚</p>
      <div class="row">
        <input id="pwdInput" type="password" placeholder="è¾“å…¥å¯†ç " />
        <button id="pwdSubmit" class="btn">æäº¤</button>
      </div>
      <div class="error" id="pwdError"></div>
      <div class="small" id="pwdHint">ï¼ˆæç¤ºï¼šé¡µé¢ä¼šè®°ä½è§£é”çŠ¶æ€ã€‚ç‚¹å‡» Lock æŒ‰é’®å¯é‡æ–°ä¸Šé”ã€‚ï¼‰</div>
    </div>
  </div>

  <script>
    /* å…­å¤§æ¿å—æ•°æ®ï¼Œä¿æŒå®Œæ•´ */
    const data = {
      "categories": [
        {
          "title": { zh: "å¸¸ç”¨å·¥å…·", en: "Tools" },
          "items": [
            { "title": { zh: "ScanQR", en: "ScanQR" }, "url": "https://scanqr.org", "desc": { zh: "åœ¨çº¿äºŒç»´ç ç”Ÿæˆå’Œæ‰«æå·¥å…·", en: "Online QR code generator & scanner" } },
            { "title": { zh: "Z-Library", en: "Z-Library" }, "url": "https://z-library.sk", "desc": { zh: "ç”µå­ä¹¦ä¸‹è½½ç½‘ç«™", en: "Ebook download site" } },
            { "title": { zh: "FreeCompress", en: "FreeCompress" }, "url": "https://freecompress.com", "desc": { zh: "æ–‡ä»¶å‹ç¼©å·¥å…·", en: "File compression tool" } },
            { "title": { zh: "Documentary Heaven", en: "Documentary Heaven" }, "url": "https://www.documentaryheaven.com", "desc": { zh: "åœ¨çº¿è§‚çœ‹çºªå½•ç‰‡", en: "Watch documentaries online" } },
            { "title": { zh: "Convertio", en: "Convertio" }, "url": "https://convertio.co", "desc": { zh: "æ–‡ä»¶æ ¼å¼è½¬æ¢å·¥å…·", en: "File format conversion tool" } }
          ]
        },
        {
          "title": { zh: "å‰ªè¾‘ / éŸ³ä¹", en: "Editing / Music" },
          "items": [
            { "title": { zh: "SaveFrom.net", en: "SaveFrom.net" }, "url": "https://zh.savefrom.net", "desc": { zh: "å…è´¹è§†é¢‘å’ŒéŸ³ä¹ä¸‹è½½å·¥å…·", en: "Free video & music downloader" } },
            { "title": { zh: "Free Music Archive", en: "Free Music Archive" }, "url": "https://freemusicarchive.org", "desc": { zh: "å…è´¹ã€å¯åˆæ³•ä¸‹è½½çš„éŸ³ä¹èµ„æºåº“", en: "Free & legal music archive" } },
            { "title": { zh: "Pixabay Music", en: "Pixabay Music" }, "url": "https://pixabay.com/music/", "desc": { zh: "å…ç‰ˆæƒéŸ³ä¹ä¸‹è½½", en: "Royalty-free music download" } }
          ]
        },
        {
          "title": { zh: "å­¦ä¹ ", en: "Study" },
          "items": [
            { "title": { zh: "Alpha One å­¦ä¹ æŒ‘æˆ˜", en: "Alpha One Challenge" }, "url": "https://www.notion.so/Alpha-One-1e876d36cebb80558886c9b3972bbf74", "desc": { zh: "ç²¾è‹±ä¸­å­¦æœˆåº¦æ¨¡æ‹Ÿè€ƒè¯•æŒ‘æˆ˜", en: "Elite school monthly mock test challenge" } },
            { "title": { zh: "Z-Library", en: "Z-Library" }, "url": "https://z-library.sk", "desc": { zh: "ç”µå­ä¹¦ä¸‹è½½ç½‘ç«™", en: "Ebook download site" } }
          ]
        },
        {
          "title": { zh: "å¨±ä¹", en: "Entertainment" },
          "items": [
            { "title": { zh: "å›¾å¯» - æ¢ç´¢ä¸–ç•Œ", en: "Tuxun - Explore the World" }, "url": "https://tuxun.fun", "desc": { zh: "æ¢ç´¢ä¸–ç•Œçš„åœ°å›¾ç±»å¨±ä¹ç½‘ç«™", en: "Map-based site to explore the world" } },
            { "title": { zh: "Polytrack", en: "Polytrack" }, "url": "https://polytrack.run", "desc": { zh: "åœ¨çº¿èµ›è½¦ä¸é©¾é©¶ç±»æ¸¸æˆ", en: "Online racing & driving game" } }
          ]
        },
        {
          "title": { zh: "å¤§å…¨", en: "Collections" },
          "items": [
            { "title": { zh: "Books / Comics / Manga (FMHY)", en: "Books / Comics / Manga (FMHY)" }, "url": "https://fmhy.net", "desc": { zh: "ç”µå­ä¹¦ã€æ¼«ç”»ã€è½»å°è¯´ç­‰èµ„æºç«™åˆé›†", en: "Collection of ebook, manga & light novel sites" } }
          ]
        },
        {
          "title": { zh: "è½¯ä»¶ä¸‹è½½", en: "Software Downloads" },
          "items": [
            { "title": { zh: "VAAB App ä¸‹è½½ç«™", en: "VAAB App Download" }, "url": "http://app.vaab.asia/pRTkrJf3PV", "desc": { zh: "æä¾›è½¯ä»¶ä¸‹è½½çš„èµ„æºç«™", en: "Resource site for software downloads" } },
            { "title": { zh: "P&SJ æ–‡æ¡£èµ„æº", en: "P&SJ Docs" }, "url": "https://docs.qq.com/doc/DWk5MTlBLSWxuSFRk", "desc": { zh: "è½¯ä»¶è¯´æ˜ä¸ä¸‹è½½æ–‡æ¡£", en: "Docs for software instructions & downloads" } }
          ]
        }
      ]
    };

    /* å¤šè¯­è¨€å­—å…¸ï¼šå¯†ç å¼¹çª— */
    const pwdTexts = {
      zh: {
        title: "è¯·è¾“å…¥è®¿é—®å¯†ç ",
        desc: "ä¸ºä¿æŠ¤æ­¤ç«™å†…å®¹ï¼Œè¯·è¾“å…¥å¯†ç ä»¥ç»§ç»­è®¿é—®ã€‚",
        submit: "æäº¤",
        hint: "ï¼ˆæç¤ºï¼šé¡µé¢ä¼šè®°ä½è§£é”çŠ¶æ€ã€‚ç‚¹å‡» Lock æŒ‰é’®å¯é‡æ–°ä¸Šé”ã€‚ï¼‰",
        empty: "è¯·è¾“å…¥å¯†ç ã€‚",
        wrong: "å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚"
      },
      en: {
        title: "Enter Access Password",
        desc: "To protect this site, please enter the password to continue.",
        submit: "Submit",
        hint: "(Hint: The page remembers unlock state. Click Lock to re-lock.)",
        empty: "Please enter a password.",
        wrong: "Incorrect password, try again."
      }
    };

    const STORED_HASH_HEX = "d303549d060022e41b62cef071b46e7c1745ce5bb224c7667acfacdf8becac8e"; // 910729
    const STORAGE_KEY = "shawn_site_unlocked_v1";

    const overlay = document.getElementById("passwordOverlay");
    const pwdInput = document.getElementById("pwdInput");
    const pwdSubmit = document.getElementById("pwdSubmit");
    const pwdError = document.getElementById("pwdError");
    const pwdTitle = document.getElementById("pwdTitle");
    const pwdDesc = document.getElementById("pwdDesc");
    const pwdHint = document.getElementById("pwdHint");
    const lockBtn = document.getElementById("lockBtn");
    const toggleBtn = document.getElementById("toggleBtn");
    const sidebar = document.getElementById("sidebar");
    const nav = document.getElementById("nav");
    const content = document.getElementById("content");
    const pageTitle = document.getElementById("pageTitle");
    const btnZh = document.getElementById("btnZh");
    const btnEn = document.getElementById("btnEn");

    let currentLang = "en";

    function escapeHtml(s){ return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"); }
    function slug(s){ return String(s).toLowerCase().replace(/[^a-z0-9\u4e00-\u9fa5]+/g,"-").replace(/(^-|-$)/g,""); }

    function buildUI(){
      nav.innerHTML = ""; content.innerHTML = "";
      data.categories.forEach(cat=>{
        const title = document.createElement("h2");
        title.textContent = "â–¸ " + cat.title[currentLang];
        const ul = document.createElement("ul");
        cat.items.forEach(it=>{
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.textContent = it.title[currentLang];
          a.href = "#"+slug(it.title[currentLang]);
          li.appendChild(a); ul.appendChild(li);
        });
        title.addEventListener("click", ()=>{ul.style.display=ul.style.display==="block"?"none":"block";});
        nav.appendChild(title); nav.appendChild(ul);

        const sec=document.createElement("section"); sec.className="card";
        const h2=document.createElement("h2"); h2.textContent=cat.title[currentLang]; sec.appendChild(h2);
        cat.items.forEach(it=>{
          const div=document.createElement("div"); div.className="site-item"; div.id=slug(it.title[currentLang]);
          div.innerHTML=`<a href="${escapeHtml(it.url)}" target="_blank">${escapeHtml(it.title[currentLang])}</a>
                         <div class="site-desc">${escapeHtml(it.desc[currentLang])}</div>`;
          sec.appendChild(div);
        });
        content.appendChild(sec);
      });
    }

    function updatePwdTexts() {
      const t = pwdTexts[currentLang];
      pwdTitle.textContent = t.title;
      pwdDesc.textContent = t.desc;
      pwdSubmit.textContent = t.submit;
      pwdHint.textContent = t.hint;
    }

    function setLang(lang){
      currentLang = lang;
      localStorage.setItem("site_lang", lang);
      btnZh.classList.toggle("active", lang==="zh");
      btnEn.classList.toggle("active", lang==="en");
      pageTitle.textContent = lang==="zh"
        ? "Shawn's Website Library Â· èµµæ¶µç»çš„ç½‘ç«™åº“"
        : "Shawn's Website Library";
      buildUI();
      updatePwdTexts();
    }

    btnZh.addEventListener("click", ()=> setLang("zh"));
    btnEn.addEventListener("click", ()=> setLang("en"));

    async function sha256Hex(str){
      const enc = new TextEncoder().encode(String(str));
      const buf = await crypto.subtle.digest('SHA-256', enc);
      const arr = Array.from(new Uint8Array(buf));
      return arr.map(b=>b.toString(16).padStart(2,"0")).join("");
    }

    function showOverlay(){ overlay.style.display="flex"; pwdInput.value=""; pwdError.textContent=""; lockBtn.textContent="ğŸ”’ Lock"; }
    function hideOverlay(){ overlay.style.display="none"; pwdError.textContent=""; lockBtn.textContent="ğŸ”“ Unlock"; }

    async function tryUnlockWithInput(){
      const v = pwdInput.value.trim();
      if(!v){ pwdError.textContent=pwdTexts[currentLang].empty; return; }
      const h = await sha256Hex(v);
      if(h===STORED_HASH_HEX){ localStorage.setItem(STORAGE_KEY,"true"); hideOverlay(); }
      else { pwdError.textContent=pwdTexts[currentLang].wrong; }
    }
    pwdSubmit.addEventListener("click", tryUnlockWithInput);
    pwdInput.addEventListener("keydown",(e)=>{ if(e.key==="Enter") tryUnlockWithInput(); });

    function init(){
      toggleBtn.addEventListener("click",()=>{ sidebar.classList.toggle("show"); });
      lockBtn.addEventListener("click",()=>{ localStorage.removeItem(STORAGE_KEY); showOverlay(); });
      const savedLang = localStorage.getItem("site_lang") || "en";
      setLang(savedLang);
      if(localStorage.getItem(STORAGE_KEY)==="true"){ hideOverlay(); } else { showOverlay(); }
    }
    init();
  </script>
</body>
</html>
